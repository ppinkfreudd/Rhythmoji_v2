<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="static/display_styles.css">
    <title>Rhythmoji - Your Music, Your Emoji</title>
</head>
<body>
    <div class="header">
        <div class="container">
            <h1 class="headline">Rhythmoji</h1>
            <p class="description">Your music, lego-fied</p>
        </div>
    </div>
    <div class="container">
        <img class="rhythmoji-image" id="dynamicImage" src="rhythmoji_no_bg.png" alt="Generated Rhythmoji">
        <br>
        <button onclick="downloadImage()" class="modal-button">Download Rhythmoji</button>
        <!-- Button to see the GPT-4 description -->
        <button id="showDescriptionBtn" class="modal-button">See Description</button>
        <!-- Div to display the GPT-4 description -->
        <div id="gptOutput" style="display:none; border: 1px solid #ccc; padding: 10px; margin-top: 20px; background-color: #f9f9f9;">GPT-4 output will be displayed here</div>
    </div>
    <div class="nav">
        <a href="/">Home</a>
        <a href="/about.html">About</a>
        <a href="/privacy.html">Privacy</a>
        <a href="/logout" id="logout-btn" class="logout-button">Logout</a>
    </div>
    <script>
        document.getElementById('showDescriptionBtn').addEventListener('click', function() {
            document.getElementById('gptOutput').style.display = 'block';
        });

        window.onload = function() {
            const params = new URLSearchParams(window.location.search);
            const imageUrl = params.get('img');
            document.getElementById('dynamicImage').src = imageUrl ? decodeURIComponent(imageUrl) : 'rhythmoji_no_bg.png';
            const description = params.get('desc');
            if (description) {
                document.getElementById('gptOutput').textContent = decodeURIComponent(description);
            }
        }

        function downloadImage() {
            var image = document.getElementById('dynamicImage').src;
            var link = document.createElement('a');
            link.href = image;
            link.download = 'Rhythmoji.jpg';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }
    </script>
</body>
</html>